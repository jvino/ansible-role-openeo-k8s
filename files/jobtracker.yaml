---
apiVersion: v1
kind: Pod
metadata:
  name: job-tracker
  namespace: spark-jobs
spec:
  containers:
  - command:
    - python3.8
    - -m
    - openeogeotrellis.job_tracker
    - --principal
    - ""
    - --keytab
    - ""
    env:
    - name: PYTHONPATH
      value: $PYTHONPATH:/opt/openeo/lib/python3.8/site-packages/
    - name: KUBE
      value: "true"
    - name: ZOOKEEPERNODES
      value: zookeeper-cscale.zookeeper.svc.cluster.local:2181
    - name: BATCH_JOBS_ZOOKEEPER_ROOT_PATH
      value: /openeo/jobs
    - name: SWIFT_URL
      value: "SWIFT_URL"
    - name: AWS_ACCESS_KEY_ID
      value: "AWS_ACCESS_KEY_ID"
    - name: AWS_SECRET_ACCESS_KEY
      value: "AWS_SECRET_ACCESS_KEY"
    - name: PYARROW_IGNORE_TIMEZONE
      value: "1"
    image: vito-docker.artifactory.vgt.vito.be/openeo-geotrellis-kube:latest
    name: job-tracker
  restartPolicy: Never
  serviceAccountName: openeo